/*!
 * Kumbiaphp jQuery plugin
 * Released under the MIT license
 */
(function(a){a.KumbiaPHP={publicPath:null,plugin:[],cConfirm:function(b){if(!confirm(this.title)){b.preventDefault()}},cFx:function(b){return function(c){c.preventDefault();((a(this.rel))[b])()}},cRemote:function(b){b.preventDefault();a(this.rel).load(this.href)},cRemoteConfirm:function(b){b.preventDefault();if(confirm(this.title)){a(this.rel).load(this.href)}},cFRemote:function(d){d.preventDefault();este=a(this);var c=a("[type=submit]",este);c.attr("disabled","disabled");var b=este.attr("action");var e=este.attr("data-div");a.post(b,este.serialize(),function(h,f){var g=a("#"+e);g.html(h);g.hide();g.show("slow");c.attr("disabled",null)})},cUpdaterSelect:function(c){var b=a(this);a("#"+b.attr("data-update")).load(b.attr("data-action")+this.value)},bindDatePicker:function(){var c=document.createElement("input");c.setAttribute("type","date");if(c.type=="date"){return true}var b=a("input.js-datepicker");if(!b.is("input")){return true}var d=function(){b.each(function(){var f={formElements:{}};f.formElements[this.id]="Y-ds-m-ds-d";var e=a(this);if(e.attr("min")!=undefined){f.rangeLow=e.attr("min").replace(/\-/g,"")}if(e.attr("max")!=undefined){f.rangeLow=e.attr("max").replace(/\-/g,"")}datePickerController.createDatePicker(f)})};if(typeof(datePickerController)!="undefined"){return d()}a("head").append('<link href="'+this.publicPath+'css/datepicker.css" type="text/css" rel="stylesheet"/>');a.getScript(this.publicPath+"javascript/datepicker/datepicker.js",function(){d()})},bind:function(){a("a.js-confirm, input.js-confirm").live("click",this.cConfirm);a("a.js-remote").live("click",this.cRemote);a("a.js-remote-confirm").live("click",this.cRemoteConfirm);a("a.js-show").live("click",this.cFx("show"));a("a.js-hide").live("click",this.cFx("hide"));a("a.js-toggle").live("click",this.cFx("toggle"));a("a.js-fade-in").live("click",this.cFx("fadeIn"));a("a.js-fade-out").live("click",this.cFx("fadeOut"));a("form.js-remote").live("submit",this.cFRemote);a("select.js-remote").live("change",this.cUpdaterSelect);a("select.js-remote").live("change",this.cUpdaterSelect);this.bindDatePicker()},autoload:function(){var c=a("[class*='jp-']");a.each(c,function(e,g){var f=a(this);var d=f.attr("class").split(" ");for(e in d){if(d[e].substr(0,3)=="jp-"){if(a.inArray(d[e].substr(3),a.KumbiaPHP.plugin)!=-1){continue}a.KumbiaPHP.plugin.push(d[e].substr(3))}}});var b=a("head");for(i in a.KumbiaPHP.plugin){a.ajaxSetup({cache:true});b.append('<link href="'+a.KumbiaPHP.publicPath+"css/"+a.KumbiaPHP.plugin[i]+'.css" type="text/css" rel="stylesheet"/>');a.getScript(a.KumbiaPHP.publicPath+"javascript/jquery/jquery."+a.KumbiaPHP.plugin[i]+".js",function(d,e){})}},initialize:function(){var b=a("script:last").attr("src");this.publicPath=b.substr(0,b.length-37);a(function(){a.KumbiaPHP.bind();a.KumbiaPHP.autoload()})}};a.KumbiaPHP.initialize()})(jQuery);
